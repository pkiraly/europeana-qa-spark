language: java

jdk:
  - oraclejdk8

install: MAVEN_OPTS="-Xms512m -Xmx2g -XX:PermSize=256m" mvn clean install -Ptravis

before_install:
  - sed -i.bak -e 's|https://nexus.codehaus.org/snapshots/|https://oss.sonatype.org/content/repositories/codehaus-snapshots/|g' ~/.m2/settings.xml
  # prevent OutOfMemoryError: unable to create new native thread
  - ulimit -t 166384
  # get the actually set values
  - ulimit -a

env:
  global:
    - MAVEN_OPTS=-Xmx2g
    - JAVA_OPTS=-Xmx2g
